<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script src="js/jquery-1.9.1.js"></script>
  </head>

  <body>

    <!-- Nuevo script para confirmar la coincidencia de claves y aÃ±adido required a los input del form -->

    <script>
      $("#iclave").onchange(function () {
        let clave_repe = $("#iclave_repetida")[0];
        if ($("#iclave").val() != $("#iclave_repetida").val()) {
          clave_repe.setCustomValidity("Las claves no coinciden");
        } else {
          iclave_repetida.setCustomValidity("");
        }
      });

      $("#iclave_repetida").onkeyup(function () {
        let clave_repe = $("#iclave_repetida")[0];
        if ($("#iclave").val() != $("#iclave_repetida").val()) {
          clave_repe.setCustomValidity("Las claves no coinciden");
        } else {
          iclave_repetida.setCustomValidity("");
        }
      });
    </script>

    <div id="registro">
      <form action="../private/registro.php" method="POST">
        <input
          type="text"
          name="id_usuario_nuevo"
          placeholder="Escriba su nombre"
          id="id_usuario_nuevo"
          required
        /><br /><br />
        <input
          type="text"
          name="apellido_usuario"
          id="apellido_usuario"
          placeholder="Escriba su apellido"
          required
        /><br /><br />

        <!-- ################################################## -->
        <!-- Amos a probar algo nuevoo!!!! _D -->
        <!-- VAmos a crear un selector, que nos permita seleccionar el centro -->
        <!-- suponiendo, que tengamos una base de datos con todos los centros -->
        <select id="registro_insti" name="id_instituto">
          <option>Centro</option>
        </select>
        <!-- Si la pagina fuese una PHP -dinamica- no habria mucha dificultad pero.. -->
        <!-- Como la pagina es un HTML -estatico-, vamos a necesitar un 
        script que nos comunique con un archivo PHP para hacer la consulta
        de centros disponibles guardados en la base de datos.  -->
        <script type="text/javascript">
          $.post("../private/busca_insti.php", {}, function (retorno) {
            $("#registro_insti").append(retorno);
          });
        </script>

        <!-- explicacion del script :D -->
        <!-- Pues: realizamos un post:
                "a este archivo",
                {le pasamos estas variables (en nuestro caso nada)},
                 y hacemos algo con lo que nos devuelve function(retorno){}
          -->

        <!--    <input
          type="text"
          name="id_instituto"
          placeholder="Escriba su id_instituto"
        />
 -->
        <br /><br />
        <!-- ################################################## -->

        <input
          type="email"
          name="iemail"
          id="iemail"
          placeholder="Escriba su e-mail"
          required
        /><br /><br />
        <input
          type="password"
          name="iclave"
          id="iclave"
          placeholder="Escriba su clave"
          required
        /><br /><br />
        <input
          type="password"
          name="iclave_repetida"
          id="iclave_repetida"
          placeholder="Repita la clave1"
          required
        /><br /><br />

        <input type="submit" value="Enviar" id="submits" />
      </form>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
